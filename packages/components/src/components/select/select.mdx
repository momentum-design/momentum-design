{/* select.accessibility.stories.mdx */}
import { Meta, Title, Primary, Controls } from '@storybook/blocks';

import SelectStories from './select.stories';

<Meta of={SelectStories} name="User Stories" />

## Feature: Select component

### ✅ Rendering

**Scenario: Placeholder is shown when no value is selected**  
> Given select renders with a placeholder "Choose an option"  
> And no value is selected  
> Then the select displays the placeholder "Choose an option"  

**Scenario: supports option groups**  
> Given select renders with grouped options  
> Then the select displays option groups  
> And the select allows selecting options within groups  

**Scenario: handles long option text with tooltip**  
> Given select renders with an option label longer than 30 characters  
> Then the long label is truncated or shows a tooltip on hover  

### ✅ Keyboard interactions

**Scenario: select is focusable and can be opened with keyboard**  
> Given select renders  
> When I focus the select and press Space or Enter  
> Then the select opens the dropdown  
> And if there is already an option selected, this option is focused  
> Else the first option is focused  

**Scenario: select can be navigated with arrow keys**  
> Given select dropdown is open  
> When I press ArrowDown or ArrowUp  
> Then the focus moves between options  

**Scenario: select is not interactive when disabled or readonly**  
> Given select renders with disabled or readonly state  
> Then the select cannot be opened or changed  

**Scenario: closes dropdown on Escape key**  
> Given select dropdown is open  
> When I press Escape  
> Then the select closes the dropdown  
> And the focus returns to the select container  

**Scenario: selects option and closes dropdown on Space/Enter key**  
> Given select dropdown is open  
> When I focus an option and press Space/Enter  
> Then the option is selected  
> And the select closes the dropdown  
> And the selected option is shown on the select container  

**Scenario: focuses first option on Home key**  
> Given select dropdown is open  
> When I press Home  
> Then the first option is focused  

**Scenario: focuses last option on End key**  
> Given select dropdown is open  
> When I press End  
> Then the last option is focused  

**Scenario: moves focus 10 options down on PageDown key**  
> Given select dropdown is open with more than 10 options  
> When I press PageDown  
> Then the focus moves 10 options down or to the last option  

**Scenario: moves focus 10 options up on PageUp key**  
> Given select dropdown is open with more than 10 options  
> When I press PageUp  
> Then the focus moves 10 options up or to the first option  

**Scenario: resets to initial state on form reset**  
> Given select renders in a form  
> When the form is reset  
> Then the select resets to its initial value  

### ✅ Accessibility and Screenreader

**Scenario: accessibility role and attributes are set**  
> Given select renders  
> Then the select container has the role combobox  
> And the dropdown container has the role of listbox  

**Scenario: announces selection state to screen readers**  
> Given select renders with options  
> When a user navigates to an option with a screen reader  
> Then the screen reader announces the option text  
> And the screen reader announces whether the option is selected  

**Scenario: announces open state to screen readers**  
> Given select renders  
> When the select dropdown opens or closes  
> Then the screen reader announces the expanded/collapsed state  

**Scenario: screen reader navigates through options**  
> Given select dropdown is open  
> When a screen reader user uses the virtual cursor  
> Then they can navigate through all available options sequentially  

**Scenario: announces option group labels**  
> Given select renders with grouped options  
> When a screen reader user navigates to a group  
> Then the screen reader announces the group label before the options  

**Scenario: announces count information to screen readers**  
> Given select dropdown is open  
> When a screen reader user focuses the listbox  
> Then the screen reader announces the total number of options  
> And the current position (e.g., "option 3 of 10")  

**Scenario: screen reader announces disabled options**  
> Given select renders with some disabled options  
> When a screen reader user navigates to a disabled option  
> Then the screen reader announces that the option is unavailable  
