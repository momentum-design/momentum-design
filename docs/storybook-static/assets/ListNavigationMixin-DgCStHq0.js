import{K as n}from"./keys-hFXe221I.js";const x=d=>{class u extends d{constructor(...e){super(...e),this.loop="true",this.propagateAllKeyEvents=!1,this.initialFocus=0,this.handleNavigationKeyDown=t=>{const r=new Set([n.ARROW_DOWN,n.ARROW_UP,n.HOME,n.END]),i=window.getComputedStyle(this).direction==="rtl",o=this.resolveDirectionKey(t.key,i);if(!r.has(o))return;const a=t.target,s=this.getCurrentIndex(a);if(s!==-1){switch(this.resetTabIndexes(s),o){case n.HOME:{this.resetTabIndexAndSetFocus(0,s);break}case n.END:{this.resetTabIndexAndSetFocus(this.navItems.length-1,s);break}case n.ARROW_DOWN:{const h=this.shouldLoop()?0:s,c=s+1===this.navItems.length?h:s+1;this.resetTabIndexAndSetFocus(c,s);break}case n.ARROW_UP:{const h=this.shouldLoop()?this.navItems.length-1:s,c=s-1===-1?h:s-1;this.resetTabIndexAndSetFocus(c,s);break}}this.propagateAllKeyEvents||(t.stopPropagation(),t.preventDefault())}},this.handleNavigationClick=t=>{const r=this.getCurrentIndex(t.target);this.resetTabIndexes(r)},this.addEventListener("keydown",this.handleNavigationKeyDown),this.addEventListener("click",this.handleNavigationClick)}async firstUpdated(e){super.firstUpdated(e);const t=Math.max(Math.min(this.initialFocus,this.navItems.length-1),0);this.resetTabIndexAndSetFocus(t,void 0,!1)}getCurrentIndex(e){return this.navItems.findIndex(t=>t===e||!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY))}resetTabIndexes(e){var t;if(this.navItems.length>0){this.navItems.forEach(i=>i.setAttribute("tabindex","-1"));const r=this.navItems[e]?e:0;this.navItems[r].setAttribute("tabindex","0"),(t=this.navItems[r])==null||t.focus()}}resetTabIndexAndSetFocus(e,t,r=!0){const{navItems:i}=this;if(i.length===0)return;const o=i[e]?e:0,a=i[o];e===t&&a&&a.getAttribute("tabindex")==="0"||(t===void 0?i.forEach(s=>s.setAttribute("tabindex","-1")):i[t]&&i[t].setAttribute("tabindex","-1"),a.setAttribute("tabindex","0"),r&&(a.focus({preventScroll:!0}),a.scrollIntoView({block:"nearest"})))}resolveDirectionKey(e,t){if(!t)return e;switch(e){case n.ARROW_LEFT:return n.ARROW_RIGHT;case n.ARROW_RIGHT:return n.ARROW_LEFT;default:return e}}shouldLoop(){return this.loop!=="false"}}return u};export{x as L};
