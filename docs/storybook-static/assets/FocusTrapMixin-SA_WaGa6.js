import{n as d}from"./index-C9z9WAEj.js";var c=Object.defineProperty,l=(a,o,r,e)=>{for(var t=void 0,i=a.length-1,n;i>=0;i--)(n=a[i])&&(t=n(o,r,t)||t);return t&&c(o,r,t),t};const b=a=>{class o extends a{constructor(...e){super(...e),this.enabledFocusTrap=!1,this.enabledPreventScroll=!1,this.focusTrapIndex=-1,this.focusableElements=[],this.shouldWrapFocus=()=>!0,this.addEventListener("keydown",this.handleKeydown)}deactivateFocusTrap(){this.enabledFocusTrap=!1,this.enabledPreventScroll=!1,this.focusTrapIndex=-1,document.body.style.overflow=""}hasNoClientRects(e){return e.getClientRects().length===0}hasZeroDimensions(e){const{width:t,height:i}=e.getBoundingClientRect(),{offsetWidth:n,offsetHeight:s}=e;return n+s+i+t===0}isNotVisible(e){return this.hasZeroDimensions(e)||this.hasNoClientRects(e)}hasHiddenStyle(e){const{display:t,opacity:i,visibility:n}=e.style;return t==="none"||i==="0"||n==="hidden"||n==="collapse"}hasComputedHidden(e){const t=getComputedStyle(e);return t.visibility==="hidden"||t.height==="0"||t.display==="none"}isHidden(e){return e.hasAttribute("hidden")||e.getAttribute("aria-hidden")==="true"||this.hasHiddenStyle(e)||this.isNotVisible(e)||this.hasComputedHidden(e)}isNotTabbable(e){return e.getAttribute("tabindex")==="-1"}isInteractiveElement(e){return!!(new Set(["BUTTON","DETAILS","EMBED","IFRAME","SELECT","TEXTAREA"]).has(e.tagName)||e instanceof HTMLAnchorElement&&e.hasAttribute("href")||e instanceof HTMLInputElement&&e.type!=="hidden"||(e instanceof HTMLAudioElement||e instanceof HTMLVideoElement)&&e.hasAttribute("controls")||(e instanceof HTMLImageElement||e instanceof HTMLObjectElement)&&e.hasAttribute("usemap")||e.hasAttribute("tabindex")&&e.tabIndex>-1)}isFocusable(e){return this.isHidden(e)||this.isNotTabbable(e)?!1:this.isInteractiveElement(e)}findFocusable(e,t=new Set){return e instanceof HTMLElement&&this.isFocusable(e)&&t.add(e),Array.from(e.children).forEach(n=>{const s=n;this.isFocusable(s)&&t.add(s),s.shadowRoot?this.findFocusable(s.shadowRoot,t):s.tagName==="SLOT"?s.assignedElements({flatten:!0}).forEach(u=>{u instanceof HTMLElement&&this.findFocusable(u,t)}):this.findFocusable(s,t)}),[...t]}setFocusableElements(){this.shadowRoot&&(this.focusableElements=this.findFocusable(this.shadowRoot,new Set))}setInitialFocus(e=0){this.focusableElements.length!==0&&(this.enabledPreventScroll&&(document.body.style.overflow="hidden"),this.focusableElements[e]&&(this.focusTrapIndex=e,this.focusableElements[e].focus()))}calculateNextIndex(e,t){const{length:i}=this.focusableElements,n=this.shouldWrapFocus();if(e===-1)return t>0?0:i-1;let s=e+t;return n?(s<0&&(s=i-1),s>=i&&(s=0)):(s<0&&(s=0),s>=i&&(s=i-1)),s}getDeepActiveElement(){var t;let e=document.activeElement||document.body;for(;e instanceof HTMLElement&&((t=e.shadowRoot)!=null&&t.activeElement);)e=e.shadowRoot.activeElement;return e||document.body}findElement(e){return this.focusableElements.findIndex(t=>this.isEqualFocusNode(e,t))}isEqualFocusNode(e,t){return e.nodeType>=0?t.isEqualNode(e)&&t===e:!1}trapFocus(e){if(this.focusableElements.length===0)return;const t=this.getDeepActiveElement(),i=this.findElement(t);e?this.focusTrapIndex=this.calculateNextIndex(i,-1):this.focusTrapIndex=this.calculateNextIndex(i,1);const n=this.focusableElements[this.focusTrapIndex];n&&n.focus()}handleKeydown(e){!this.enabledFocusTrap||!this.focusableElements.length||e.key==="Tab"&&(e.preventDefault(),this.trapFocus(e.shiftKey))}}return l([d({type:Boolean})],o.prototype,"enabledFocusTrap"),l([d({type:Boolean})],o.prototype,"enabledPreventScroll"),o};export{b as F};
