import{n as d}from"./iframe-DD1qd397.js";import{f as u}from"./dom-CCAb5pjN.js";const l=class l{static get stackArray(){return Array.from(this.stack)}static getActiveTrap(){return this.stackArray.at(-1)}static addKeydownListener(s){this.currentKeydownListener=s,document.addEventListener("keydown",s)}static removeKeydownListener(){this.currentKeydownListener&&document.removeEventListener("keydown",this.currentKeydownListener)}static activate(s){this.stackArray.forEach(n=>{n!==s&&n.setIsFocusTrapActivated(!1)}),this.stack.add(s),this.removeKeydownListener(),this.addKeydownListener(s.handleTabKeydown.bind(s))}static deactivate(s){if(this.stack.has(s)&&(this.stack.delete(s),this.removeKeydownListener(),this.stack.size>0)){const n=this.stackArray.pop();n&&(n.setIsFocusTrapActivated(!0),this.addKeydownListener(n.handleTabKeydown.bind(n)))}}};l.stack=new Set,l.currentKeydownListener=null;let c=l;var h=Object.defineProperty,p=(r,s,n,e)=>{for(var t=void 0,i=r.length-1,o;i>=0;i--)(o=r[i])&&(t=o(s,n,t)||t);return t&&h(s,n,t),t};const m=r=>{class s extends r{constructor(){super(...arguments),this.shouldFocusTrapWrap=!0,this.focusTrapIndex=-1,this.focusableElements=[],this.isFocusTrapActivated=!1}setIsFocusTrapActivated(e){this.isFocusTrapActivated=e}activateFocusTrap(){this.setIsFocusTrapActivated(!0),c.activate(this)}deactivateFocusTrap(){this.setIsFocusTrapActivated(!1),c.deactivate(this),this.focusTrapIndex=-1}setFocusableElements(){this.shadowRoot&&(this.focusableElements=u(this.shadowRoot))}setInitialFocus(e=0){this.setFocusableElements(),!(this.focusableElements.length===0||!this.focusTrap)&&this.focusableElements[e]&&(this.focusTrapIndex=e,this.focusableElements[e].focus({preventScroll:!0}))}calculateNextIndex(e,t){const{length:i}=this.focusableElements;if(e===-1)return t>0?0:i-1;let o=e+t;return this.shouldFocusTrapWrap?(o<0&&(o=i-1),o>=i&&(o=0)):(o<0&&(o=0),o>=i&&(o=i-1)),o}getDeepActiveElement(){var t;let e=document.activeElement||document.body;for(;e instanceof HTMLElement&&((t=e.shadowRoot)!=null&&t.activeElement);)e=e.shadowRoot.activeElement;return e||document.body}findElement(e){return this.focusableElements.findIndex(t=>this.isEqualFocusNode(e,t))}isEqualFocusNode(e,t){return e.nodeType>=0?t.isEqualNode(e)&&t===e:!1}trapFocus(e){if(this.setFocusableElements(),this.focusableElements.length===0)return;const t=this.getDeepActiveElement(),i=this.findElement(t);e.shiftKey?this.focusTrapIndex=this.calculateNextIndex(i,-1):this.focusTrapIndex=this.calculateNextIndex(i,1);const a=this.focusableElements[this.focusTrapIndex];a.tagName!=="IFRAME"&&a&&(e.preventDefault(),a.focus())}handleTabKeydown(e){this.isFocusTrapActivated&&e.key==="Tab"&&this.trapFocus(e)}}return p([d({type:Boolean,reflect:!0,attribute:"should-focus-trap-wrap"})],s.prototype,"shouldFocusTrapWrap"),s},y=r=>{class s extends r{constructor(){super(...arguments),this.isPreventScrollActive=!1,this.previousDocumentBodyStyleOverflow=""}activatePreventScroll(){this.preventScroll&&!this.isPreventScrollActive&&(this.isPreventScrollActive=!0,this.previousDocumentBodyStyleOverflow=document.body.style.overflow,document.body.style.overflow="hidden")}deactivatePreventScroll(){this.isPreventScrollActive&&(this.isPreventScrollActive=!1,document.body.style.overflow=this.previousDocumentBodyStyleOverflow)}}return s},b=r=>{class s extends r{constructor(){super(...arguments),this.isBackdropInvisible=!1,this.backdropElement=null}createBackdrop(e){const t=document.createElement("div");t.classList.add(`${e}-backdrop`);const i=document.createElement("style");i.textContent=`
        .${e}-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: ${this.isBackdropInvisible?"transparent":"var(--mds-color-theme-common-overlays-secondary-normal)"};
          z-index: ${this.zIndex-2};
        }
      `,t.appendChild(i);const a=document.getElementById(this.backdropAppendTo)||this.parentElement;a==null||a.appendChild(t),this.backdropElement=t}removeBackdrop(){this.backdropElement&&(this.backdropElement.remove(),this.backdropElement=null)}keepElementAboveBackdrop(e){e&&(this.elementOriginalStyle={zIndex:e.style.zIndex,position:e.style.position},e.style.zIndex=`${this.zIndex-1}`,["fixed","absolute"].includes(window.getComputedStyle(e).position)||(e.style.position="relative"))}moveElementBackAfterBackdropRemoval(e){!e||!this.elementOriginalStyle||(e.style.zIndex=this.elementOriginalStyle.zIndex,e.style.position=this.elementOriginalStyle.position,this.elementOriginalStyle=void 0)}}return s};export{b as B,m as F,y as P};
