import{i as A,j as h,m as v,p as x,o as Q,R as b}from"./iframe-Bi1VXFcK.js";import{e as j,i as C,t as D}from"./directive-Ctav8iJK.js";/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const w=(r,f,c)=>{const p=new Map;for(let t=f;t<=c;t++)p.set(r[t],t);return p},I=j(class extends C{constructor(r){if(super(r),r.type!==D.CHILD)throw Error("repeat() can only be used in text expressions")}dt(r,f,c){let p;c===void 0?c=f:f!==void 0&&(p=f);const t=[],i=[];let l=0;for(const u of r)t[l]=p?p(u,l):l,i[l]=c(u,l),l++;return{values:i,keys:t}}render(r,f,c){return this.dt(r,f,c).values}update(r,[f,c,p]){const t=A(r),{values:i,keys:l}=this.dt(f,c,p);if(!Array.isArray(t))return this.ut=l,i;const u=this.ut??(this.ut=[]),a=[];let y,g,s=0,o=t.length-1,e=0,n=i.length-1;for(;s<=o&&e<=n;)if(t[s]===null)s++;else if(t[o]===null)o--;else if(u[s]===l[e])a[e]=h(t[s],i[e]),s++,e++;else if(u[o]===l[n])a[n]=h(t[o],i[n]),o--,n--;else if(u[s]===l[n])a[n]=h(t[s],i[n]),v(r,a[n+1],t[s]),s++,n--;else if(u[o]===l[e])a[e]=h(t[o],i[e]),v(r,t[s],t[o]),o--,e++;else if(y===void 0&&(y=w(l,e,n),g=w(u,s,o)),y.has(u[s]))if(y.has(u[o])){const d=g.get(l[e]),m=d!==void 0?t[d]:null;if(m===null){const k=v(r,t[s]);h(k,i[e]),a[e]=k}else a[e]=h(m,i[e]),v(r,t[s],m),t[d]=null;e++}else x(t[o]),o--;else x(t[s]),s++;for(;e<=n;){const d=v(r,a[n+1]);h(d,i[e]),a[e++]=d}for(;s<=o;){const d=t[s++];d!==null&&x(d)}return this.ut=l,Q(r,a),b}});export{I as Q};
