import{i as p,k as b}from"./lit-element-CHllvULs.js";import{u as v,C as m,n as c}from"./index-HW6KrQZO.js";import{r as l}from"./state-CWckTc1X.js";import{h as C,a as f}from"./index-MYSkQ1zX.js";import{p as g}from"./index-BYMLCX4c.js";import{I as y}from"./iconprovider.component-BFc9mT2k.js";const x=[C,p`
    :host {
      --mdc-icon-fill-color: currentColor;
      --mdc-icon-size: var(--computed-icon-size);
      --mdc-icon-border-radius: 0.25rem;

      height: var(--mdc-icon-size);
      width: var(--mdc-icon-size);
      border-radius: var(--mdc-icon-border-radius);
    }
    :host::part(icon) {
      height: 100%;
      width: 100%;
      fill: var(--mdc-icon-fill-color);
    }
  `,...f()],z=async(h,t,e,n)=>{const o=await fetch(`${h}/${t}.${e}`,{signal:n});if(!o.ok)throw new Error("There was a problem while fetching the icon!");return o.text()},E=v.constructTagName("icon"),u={NAME:void 0,SIZE:1};var S=Object.defineProperty,s=(h,t,e,n)=>{for(var o=void 0,i=h.length-1,a;i>=0;i--)(a=h[i])&&(o=a(t,e,o)||o);return o&&S(t,e,o),o};const d=class d extends m{constructor(){super(),this.name=u.NAME,this.ariaLabel=null,this.iconProviderContext=g.consume({host:this,context:y.Context}),this.abortController=new AbortController}prepareIconElement(t){const e=new DOMParser().parseFromString(t,"text/html").body.children[0];return this.name&&e.setAttribute("data-name",this.name),e.setAttribute("part","icon"),e.setAttribute("aria-hidden","true"),e}async getIconData(){if(this.iconProviderContext.value){const{fileExtension:t,url:e,iconsCache:n,shouldCache:o}=this.iconProviderContext.value;if(e&&t&&this.name){if(this.abortController.abort(),n.has(this.name)){const i=this.prepareIconElement(n.get(this.name));this.handleIconLoadedSuccess(i);return}this.abortController=new AbortController;try{const i=await z(e,this.name,t,this.abortController.signal),a=this.prepareIconElement(i);this.handleIconLoadedSuccess(a),o&&n.set(this.name,i)}catch(i){this.handleIconLoadedFailure(i)}}}}handleIconLoadedSuccess(t){this.iconData=t;const e=new Event("load",{bubbles:!0,cancelable:!0});this.dispatchEvent(e)}handleIconLoadedFailure(t){const e=new CustomEvent("error",{bubbles:!0,cancelable:!0,detail:{error:t}});this.dispatchEvent(e)}updateSize(){if(this.computedIconSize&&(this.lengthUnit||this.lengthUnitFromContext)){const t=`${this.computedIconSize}${this.lengthUnit??this.lengthUnitFromContext}`;this.style.setProperty("--computed-icon-size",t)}}get computedIconSize(){return this.size??this.sizeFromContext??u.SIZE}updated(t){var e,n,o,i;super.updated(t),t.has("name")&&this.getIconData().catch(a=>{a.name!=="AbortError"&&this.onerror&&this.onerror(a)}),t.has("ariaLabel")&&(this.role=this.ariaLabel?"img":null),(t.has("size")||t.has("lengthUnit"))&&this.updateSize(),this.lengthUnitFromContext!==((e=this.iconProviderContext.value)==null?void 0:e.lengthUnit)&&(this.lengthUnitFromContext=(n=this.iconProviderContext.value)==null?void 0:n.lengthUnit,this.updateSize()),this.sizeFromContext!==((o=this.iconProviderContext.value)==null?void 0:o.size)&&(this.sizeFromContext=(i=this.iconProviderContext.value)==null?void 0:i.size,this.updateSize())}render(){return b` ${this.iconData} `}};d.styles=[...m.styles,...x];let r=d;s([l()],r.prototype,"iconData");s([l()],r.prototype,"lengthUnitFromContext");s([l()],r.prototype,"sizeFromContext");s([c({type:String,reflect:!0})],r.prototype,"name");s([c({type:Number})],r.prototype,"size");s([c({type:String,attribute:"length-unit"})],r.prototype,"lengthUnit");s([c({type:String,attribute:"aria-label"})],r.prototype,"ariaLabel");s([l()],r.prototype,"abortController");r.register(E);
