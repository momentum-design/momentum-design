import{n as p,ai as l,aj as f}from"./iframe-Dz4a6dNK.js";var m=Object.defineProperty,E=(c,e,i,t)=>{for(var s=void 0,n=c.length-1,o;n>=0;n--)(o=c[n])&&(s=o(e,i,s)||s);return s&&m(e,i,s),s};const I=c=>{class e extends c{constructor(){super(...arguments),this.shouldFocusTrapWrap=!0,this.focusTrapIndex=-1,this.focusableElements=[],this.isFocusTrapActivated=!1}setIsFocusTrapActivated(t){this.isFocusTrapActivated=t}activateFocusTrap(){this.setIsFocusTrapActivated(!0),l.activate(this)}deactivateFocusTrap(){this.setIsFocusTrapActivated(!1),l.deactivate(this),this.focusTrapIndex=-1}setFocusableElements(){this.shadowRoot&&(this.focusableElements=f(this.shadowRoot))}setInitialFocus(t=0){this.setFocusableElements(),!(this.focusableElements.length===0||!this.focusTrap)&&this.focusableElements[t]&&(this.focusTrapIndex=t,this.focusableElements[t].focus({preventScroll:!0}))}calculateNextIndex(t,s){const{length:n}=this.focusableElements;if(t===-1)return s>0?0:n-1;let o=t+s;return this.shouldFocusTrapWrap?(o<0&&(o=n-1),o>=n&&(o=0)):(o<0&&(o=0),o>=n&&(o=n-1)),o}getDeepActiveElement(){var s;let t=document.activeElement||document.body;for(;t instanceof HTMLElement&&((s=t.shadowRoot)!=null&&s.activeElement);)t=t.shadowRoot.activeElement;return t||document.body}findElement(t){return this.focusableElements.findIndex(s=>this.isEqualFocusNode(t,s))}isEqualFocusNode(t,s){return t.nodeType>=0?s.isEqualNode(t)&&s===t:!1}trapFocus(t){if(this.setFocusableElements(),this.focusableElements.length===0)return;const s=this.getDeepActiveElement(),n=this.findElement(s);t.shiftKey?this.focusTrapIndex=this.calculateNextIndex(n,-1):this.focusTrapIndex=this.calculateNextIndex(n,1);const a=this.focusableElements[this.focusTrapIndex];a.tagName!=="IFRAME"&&a&&(t.preventDefault(),a.focus())}handleTabKeydown(t){this.isFocusTrapActivated&&t.key==="Tab"&&this.trapFocus(t)}}return E([p({type:Boolean,reflect:!0,attribute:"should-focus-trap-wrap"})],e.prototype,"shouldFocusTrapWrap"),e},x=c=>{class e extends c{constructor(){super(...arguments),this.isPreventScrollActive=!1,this.previousDocumentBodyStyleOverflow=""}activatePreventScroll(){this.preventScroll&&!this.isPreventScrollActive&&(this.isPreventScrollActive=!0,this.previousDocumentBodyStyleOverflow=document.body.style.overflow,document.body.style.overflow="hidden")}deactivatePreventScroll(){this.isPreventScrollActive&&(this.isPreventScrollActive=!1,document.body.style.overflow=this.previousDocumentBodyStyleOverflow)}}return e},r=[],h=1e3,v=3,d=-2,u=-1;class b{constructor(e){this.host=e,e.addController(this)}hostConnected(){}hostDisconnected(){this.remove([this.host])}get length(){return r.length}pushHost(){var e,i;return this.has(this.host)?!1:(r.push(this.host),(i=(e=this.host).onComponentStackChanged)==null||i.call(e,"added"),!0)}popHost(){return this.popItem(this.host)}popItem(e){if(!this.has(e))return;const i=r.indexOf(e),t=[];for(let s=r.length-1;s>=i;s-=1){const n=r[s];(n===e||n.triggerID!==e.triggerID)&&t.push(n)}return this.remove(t),e}pop(){var i;const e=r.pop();return(i=e==null?void 0:e.onComponentStackChanged)==null||i.call(e,"removed"),e}popUntil(e){const i=[];for(let t=r.length-1;t>=0;t-=1){const s=r[t],n=e(s,t);if(n===!1)break;n!=="skip"&&i.push(s)}return this.remove(i)}peek(){return r.at(-1)}remove(e){var s,n;const i=e.filter(o=>r.includes(o)),t=i.reduce((o,a)=>Math.min(o,r.indexOf(a)),1/0);i.forEach(o=>{r.splice(r.indexOf(o),1)}),i.forEach(o=>{var a;(a=o==null?void 0:o.onComponentStackChanged)==null||a.call(o,"removed")});for(let o=t;o<r.length;o+=1)(n=(s=r[o]).onComponentStackChanged)==null||n.call(s,"moved");return i}has(e){return r.includes(e)}getHostDepth(){return this.getElementDepth(this.host)}getElementDepth(e){return r.indexOf(e)}getHostZIndex(){return this.getItemZIndex(this.host)}getItemZIndex(e){const i=this.getElementDepth(e);return i>=0?h+i*v:h}isHostOnTop(){return this.peek()===this.host}clear(){this.popUntil(()=>!0)}}const y=c=>{class e extends c{constructor(){super(...arguments),this.isBackdropInvisible=!1,this.backdropElement=null,this.triggerElementCache=null}update(t){var s;if(super.update(t),t.has("zIndex")&&this.backdropElement){this.backdropElement.style.zIndex=`${this.zIndex+d}`;const n=(s=this.triggerElementCache)==null?void 0:s.deref();n&&(n.style.zIndex=`${this.zIndex+u}`)}}createBackdrop(t){const s=document.createElement("div");s.classList.add(`${t}-backdrop`);const n=document.createElement("style");n.textContent=`
        .${t}-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: ${this.isBackdropInvisible?"transparent":"var(--mds-color-theme-common-overlays-secondary-normal)"};
          z-index: ${this.zIndex+d};
        }
      `,s.appendChild(n);const a=document.getElementById(this.backdropAppendTo)||this.parentElement;a==null||a.appendChild(s),this.backdropElement=s}removeBackdrop(){this.backdropElement&&(this.backdropElement.remove(),this.backdropElement=null)}keepElementAboveBackdrop(t){t&&(this.triggerElementCache=new WeakRef(t),this.elementOriginalStyle={zIndex:t.style.zIndex,position:t.style.position},t.style.zIndex=`${this.zIndex+u}`,["fixed","absolute"].includes(window.getComputedStyle(t).position)||(t.style.position="relative"))}moveElementBackAfterBackdropRemoval(t){!t||!this.elementOriginalStyle||(t.style.zIndex=this.elementOriginalStyle.zIndex,t.style.position=this.elementOriginalStyle.position,this.elementOriginalStyle=void 0,this.triggerElementCache=null)}}return e};export{y as B,b as D,I as F,x as P};
