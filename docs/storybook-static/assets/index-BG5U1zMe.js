import{i as x,k as w}from"./lit-element-CHllvULs.js";import{u as z,C as v,n as p}from"./index-HW6KrQZO.js";import{r as y}from"./state-CWckTc1X.js";import{h as E,a as S}from"./index-MYSkQ1zX.js";import{p as I}from"./index-BYMLCX4c.js";import{I as F}from"./iconprovider.component-XZChMYdq.js";const U=[E,x`
    :host {
      --mdc-icon-fill-color: currentColor;
      --mdc-icon-size: var(--computed-icon-size);
      --mdc-icon-border-radius: 0.25rem;

      height: var(--mdc-icon-size);
      width: var(--mdc-icon-size);
      border-radius: var(--mdc-icon-border-radius);
    }
    :host::part(icon) {
      height: 100%;
      width: 100%;
      fill: var(--mdc-icon-fill-color);
    }
  `,...S()],d={},A=async r=>(d[r]===void 0&&(d[r]=new Map),{async set(t,e){d[r].set(t.url,await e.text())},async get(t){return d[r].get(t.url)},async delete(t){d[r].delete(t.url)}}),L=async r=>{const t=await caches.open(r);return{set:async(e,n)=>{await t.put(e,n)},get:async e=>{const n=await t.match(e);return n==null?void 0:n.text()},delete:async e=>{await t.delete(e)}}},P=async(r,t)=>t==="in-memory-cache"?A(r):L(r),g=async r=>fetch(r).then(t=>{if(!t.ok)throw new Error("There was a problem while fetching the icon!");return t}),D=async({url:r,name:t,fileExtension:e,cacheStrategy:n,cacheName:i,renewSignal:a})=>{const o=a(),l=new Request(`${r}/${t}.${e}`,{signal:o});return!i||!n||!["in-memory-cache","web-cache-api"].includes(n)?g(l).then(h=>h.text()):P(i,n).then(h=>h.get(l).then(m=>m||g(l.clone()).then(u=>{var f;return u.status<400&&u.headers.has("content-type")?(f=h.set)==null?void 0:f.call(h,l,u.clone()).then(()=>u.text()):u.text()})).catch(m=>{throw new Error(`Error in caching the Icon ${t}, ${m}`)}))},$=z.constructTagName("icon"),C={NAME:void 0,SIZE:1};var M=Object.defineProperty,c=(r,t,e,n)=>{for(var i=void 0,a=r.length-1,o;a>=0;a--)(o=r[a])&&(i=o(t,e,i)||i);return i&&M(t,e,i),i};const b=class b extends v{constructor(){super(),this.name=C.NAME,this.ariaLabel=null,this.iconProviderContext=I.consume({host:this,context:F.Context}),this.abortController=new AbortController}prepareIconElement(t){const e=new DOMParser().parseFromString(t,"text/html").body.children[0];return this.name&&e.setAttribute("data-name",this.name),e.setAttribute("part","icon"),e.setAttribute("aria-hidden","true"),e}async getIconData(){if(this.iconProviderContext.value){const{fileExtension:t,url:e,cacheName:n,cacheStrategy:i}=this.iconProviderContext.value;if(e&&t&&this.name){const a=()=>(this.abortController.abort(),this.abortController=new AbortController,this.abortController.signal);try{const o=await D({url:e,name:this.name,fileExtension:t,cacheName:n,cacheStrategy:i,renewSignal:a}),l=this.prepareIconElement(o);this.handleIconLoadedSuccess(l)}catch(o){this.handleIconLoadedFailure(o)}}}}handleIconLoadedSuccess(t){this.iconData=t;const e=new Event("load",{bubbles:!0,cancelable:!0});this.dispatchEvent(e)}handleIconLoadedFailure(t){const e=new CustomEvent("error",{bubbles:!0,cancelable:!0,detail:{error:t}});this.dispatchEvent(e)}updateSize(){if(this.computedIconSize&&(this.lengthUnit||this.lengthUnitFromContext)){const t=`${this.computedIconSize}${this.lengthUnit??this.lengthUnitFromContext}`;this.style.setProperty("--computed-icon-size",t)}}get computedIconSize(){return this.size??this.sizeFromContext??C.SIZE}updated(t){var e,n,i,a;super.updated(t),t.has("name")&&this.getIconData().catch(o=>{o.name!=="AbortError"&&this.onerror&&this.onerror(o)}),t.has("ariaLabel")&&(this.role=this.ariaLabel?"img":null),(t.has("size")||t.has("lengthUnit"))&&this.updateSize(),this.lengthUnitFromContext!==((e=this.iconProviderContext.value)==null?void 0:e.lengthUnit)&&(this.lengthUnitFromContext=(n=this.iconProviderContext.value)==null?void 0:n.lengthUnit,this.updateSize()),this.sizeFromContext!==((i=this.iconProviderContext.value)==null?void 0:i.size)&&(this.sizeFromContext=(a=this.iconProviderContext.value)==null?void 0:a.size,this.updateSize())}render(){return w` ${this.iconData} `}};b.styles=[...v.styles,...U];let s=b;c([y()],s.prototype,"iconData");c([y()],s.prototype,"lengthUnitFromContext");c([y()],s.prototype,"sizeFromContext");c([p({type:String,reflect:!0})],s.prototype,"name");c([p({type:Number})],s.prototype,"size");c([p({type:String,attribute:"length-unit"})],s.prototype,"lengthUnit");c([p({type:String,attribute:"aria-label"})],s.prototype,"ariaLabel");c([y()],s.prototype,"abortController");s.register($);
