import{u as v,S as I,E as y,n as d}from"./iframe-CIWT31eQ.js";import{v as b}from"./v4-CmTdKEVZ.js";function f(r,e=500){let t;const u=(...n)=>{t!==void 0&&window.clearTimeout(t),t=window.setTimeout(()=>{t=void 0,r(...n)},e)};return u.cancel=()=>{t!==void 0&&(window.clearTimeout(t),t=void 0)},u}const T=v.constructTagName("screenreaderannouncer"),L={ASSERTIVE:"assertive",POLITE:"polite",OFF:"off"},c={ARIA_LIVE:L.POLITE,DELAY:150,IDENTITY:"mdc-screenreaderannouncer-identity",TIMEOUT:2e4,DEBOUNCE:500},g=[I`
    :host {
      display: none;
      visibility: hidden;
    }
  `];var w=Object.defineProperty,a=(r,e,t,u)=>{for(var n=void 0,o=r.length-1,s;o>=0;o--)(s=r[o])&&(n=s(e,t,n)||n);return n&&w(e,t,n),n};const l=class l extends y{constructor(){super(...arguments),this.announcement="",this.identity="",this.dataAriaLive=c.ARIA_LIVE,this.delay=c.DELAY,this.timeout=c.TIMEOUT,this.debounceTime=c.DEBOUNCE,this.timeOutIds=[],this.ariaLiveAnnouncementIds=[]}announce(e,t,u,n){var o;if(e.length>0){const s=`mdc-screenreaderannouncer-announcement-${b()}`,m=document.createElement("div");m.setAttribute("id",s),m.setAttribute("aria-live",n),(o=document.getElementById(this.identity))==null||o.appendChild(m);const A=window.setTimeout(()=>{const h=document.createElement("p");h.textContent=e,m.appendChild(h),this.ariaLiveAnnouncementIds.push(s);const E=window.setTimeout(()=>{var p;(p=document.getElementById(s))==null||p.remove()},u);this.timeOutIds.push(E)},t);this.timeOutIds.push(A)}}clearTimeOutsAndAnnouncements(){this.timeOutIds.forEach(e=>{window.clearTimeout(e)}),this.ariaLiveAnnouncementIds.forEach(e=>{var t;(t=document.getElementById(e))==null||t.remove()})}createAnnouncementAriaLiveRegion(){let e=document.getElementById(this.identity);if(!e){e=document.createElement("div"),e.id=this.identity;const t=document.createElement("style");t.textContent=`
        .mdc-screenreaderannouncer__visually-hidden {
          clip: rect(0 0 0 0);
          clip-path: inset(50%);
          height: 1px;
          overflow: hidden;
          position: absolute;
          white-space: nowrap;
          width: 1px;
        }
      `,e.appendChild(t),e.classList.add("mdc-screenreaderannouncer__visually-hidden"),document.body.appendChild(e)}}setupDebouncedAnnounce(){this.debouncedAnnounce=f(()=>{this.announcement.length>0&&(this.announce(this.announcement,this.delay,this.timeout,this.dataAriaLive),this.announcement="")},this.debounceTime)}connectedCallback(){super.connectedCallback(),this.identity.length===0&&(this.identity=c.IDENTITY),this.createAnnouncementAriaLiveRegion(),this.setupDebouncedAnnounce()}disconnectedCallback(){var e;super.disconnectedCallback(),this.clearTimeOutsAndAnnouncements(),(e=this.debouncedAnnounce)==null||e.cancel()}updated(e){var t;e.has("identity")&&this.identity.length===0&&(this.identity=c.IDENTITY,this.createAnnouncementAriaLiveRegion()),e.has("debounceTime")&&this.setupDebouncedAnnounce(),e.has("announcement")&&this.announcement.length>0&&((t=this.debouncedAnnounce)==null||t.call(this))}};l.styles=[...y.styles,...g];let i=l;a([d({type:String,reflect:!0})],i.prototype,"announcement");a([d({type:String,reflect:!0})],i.prototype,"identity");a([d({type:String,reflect:!0,attribute:"data-aria-live"})],i.prototype,"dataAriaLive");a([d({type:Number,reflect:!0})],i.prototype,"delay");a([d({type:Number,reflect:!0})],i.prototype,"timeout");a([d({type:Number,reflect:!0,attribute:"debounce-time"})],i.prototype,"debounceTime");i.register(T);export{L as A,c as D};
