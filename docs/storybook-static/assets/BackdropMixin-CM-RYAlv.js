import{n as u}from"./iframe-D_NoT5mJ.js";var h=Object.defineProperty,f=(a,n,o,t)=>{for(var e=void 0,s=a.length-1,i;s>=0;s--)(i=a[s])&&(e=i(n,o,e)||e);return e&&h(n,o,e),e};const c=class c{static get stackArray(){return Array.from(this.stack)}static addKeydownListener(n){this.currentKeydownListener=n,document.addEventListener("keydown",n)}static removeKeydownListener(){this.currentKeydownListener&&document.removeEventListener("keydown",this.currentKeydownListener)}static activate(n){this.stackArray.forEach(o=>{o!==n&&o.setIsFocusTrapActivated(!1)}),this.stack.add(n),this.removeKeydownListener(),this.addKeydownListener(n.handleTabKeydown.bind(n))}static deactivate(n){if(this.stack.has(n)&&(this.stack.delete(n),this.removeKeydownListener(),this.stack.size>0)){const o=this.stackArray.pop();o&&(o.setIsFocusTrapActivated(!0),this.addKeydownListener(o.handleTabKeydown.bind(o)))}}};c.stack=new Set,c.currentKeydownListener=null;let d=c;const v=a=>{class n extends a{constructor(){super(...arguments),this.shouldFocusTrapWrap=!0,this.focusTrapIndex=-1,this.focusableElements=[],this.isFocusTrapActivated=!1}setIsFocusTrapActivated(t){this.isFocusTrapActivated=t}activateFocusTrap(){this.setIsFocusTrapActivated(!0),d.activate(this)}deactivateFocusTrap(){this.setIsFocusTrapActivated(!1),d.deactivate(this),this.focusTrapIndex=-1}hasNoClientRects(t){return t.getClientRects().length===0}hasZeroDimensions(t){const{width:e,height:s}=t.getBoundingClientRect(),{offsetWidth:i,offsetHeight:r}=t;return i+r+s+e===0}isNotVisible(t){return this.hasZeroDimensions(t)||this.hasNoClientRects(t)}hasHiddenStyle(t){const{display:e,opacity:s,visibility:i}=t.style;return e==="none"||s==="0"||i==="hidden"||i==="collapse"}hasComputedHidden(t){const e=getComputedStyle(t);return e.visibility==="hidden"||e.height==="0"||e.display==="none"}isHidden(t){return t.hasAttribute("hidden")||t.getAttribute("aria-hidden")==="true"||this.hasHiddenStyle(t)||this.isNotVisible(t)||this.hasComputedHidden(t)}isDisabled(t){return t.disabled}isNotTabbable(t){return t.getAttribute("tabindex")==="-1"}isInteractiveElement(t){return!!(new Set(["BUTTON","DETAILS","EMBED","IFRAME","SELECT","TEXTAREA"]).has(t.tagName)||t instanceof HTMLAnchorElement&&t.hasAttribute("href")||t instanceof HTMLInputElement&&t.type!=="hidden"||(t instanceof HTMLAudioElement||t instanceof HTMLVideoElement)&&t.hasAttribute("controls")||(t instanceof HTMLImageElement||t instanceof HTMLObjectElement)&&t.hasAttribute("usemap")||t.hasAttribute("tabindex")&&t.tabIndex>-1)}isFocusable(t){return this.isHidden(t)||this.isNotTabbable(t)||this.isDisabled(t)?!1:this.isInteractiveElement(t)}findFocusable(t,e=new Set){t instanceof HTMLElement&&this.isFocusable(t)&&e.add(t);let s=[];return t.children.length?s=Array.from(t.children):t instanceof HTMLElement&&t.shadowRoot&&(s=Array.from(t.shadowRoot.children)),s.forEach(i=>{const r=i;this.isFocusable(r)&&e.add(r),r.shadowRoot?this.findFocusable(r.shadowRoot,e):r.tagName==="SLOT"?r.assignedElements({flatten:!0}).forEach(l=>{l instanceof HTMLElement&&this.findFocusable(l,e)}):this.findFocusable(r,e)}),[...e]}setFocusableElements(){this.shadowRoot&&(this.focusableElements=this.findFocusable(this.shadowRoot,new Set))}setInitialFocus(t=0){this.setFocusableElements(),!(this.focusableElements.length===0||!this.focusTrap)&&this.focusableElements[t]&&(this.focusTrapIndex=t,this.focusableElements[t].focus({preventScroll:!0}))}calculateNextIndex(t,e){const{length:s}=this.focusableElements;if(t===-1)return e>0?0:s-1;let i=t+e;return this.shouldFocusTrapWrap?(i<0&&(i=s-1),i>=s&&(i=0)):(i<0&&(i=0),i>=s&&(i=s-1)),i}getDeepActiveElement(){var e;let t=document.activeElement||document.body;for(;t instanceof HTMLElement&&((e=t.shadowRoot)!=null&&e.activeElement);)t=t.shadowRoot.activeElement;return t||document.body}findElement(t){return this.focusableElements.findIndex(e=>this.isEqualFocusNode(t,e))}isEqualFocusNode(t,e){return t.nodeType>=0?e.isEqualNode(t)&&e===t:!1}trapFocus(t){if(this.setFocusableElements(),this.focusableElements.length===0)return;const e=this.getDeepActiveElement(),s=this.findElement(e);t.shiftKey?this.focusTrapIndex=this.calculateNextIndex(s,-1):this.focusTrapIndex=this.calculateNextIndex(s,1);const r=this.focusableElements[this.focusTrapIndex];r.tagName!=="IFRAME"&&r&&(t.preventDefault(),r.focus())}handleTabKeydown(t){this.isFocusTrapActivated&&t.key==="Tab"&&this.trapFocus(t)}}return f([u({type:Boolean,reflect:!0,attribute:"should-focus-trap-wrap"})],n.prototype,"shouldFocusTrapWrap"),n},y=a=>{class n extends a{constructor(){super(...arguments),this.isPreventScrollActive=!1,this.previousDocumentBodyStyleOverflow=""}activatePreventScroll(){this.preventScroll&&!this.isPreventScrollActive&&(this.isPreventScrollActive=!0,this.previousDocumentBodyStyleOverflow=document.body.style.overflow,document.body.style.overflow="hidden")}deactivatePreventScroll(){this.isPreventScrollActive&&(this.isPreventScrollActive=!1,document.body.style.overflow=this.previousDocumentBodyStyleOverflow)}}return n},E=a=>{class n extends a{constructor(){super(...arguments),this.isBackdropInvisible=!1,this.backdropElement=null}createBackdrop(t){const e=document.createElement("div");e.classList.add(`${t}-backdrop`);const s=document.createElement("style");s.textContent=`
        .${t}-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: ${this.isBackdropInvisible?"transparent":"var(--mds-color-theme-common-overlays-secondary-normal)"};
          z-index: ${this.zIndex-2};
        }
      `,e.appendChild(s);const r=document.getElementById(this.backdropAppendTo)||this.parentElement;r==null||r.appendChild(e),this.backdropElement=e}removeBackdrop(){this.backdropElement&&(this.backdropElement.remove(),this.backdropElement=null)}keepElementAboveBackdrop(t){t&&(this.elementOriginalStyle={zIndex:t.style.zIndex,position:t.style.position},t.style.zIndex=`${this.zIndex-1}`,["fixed","absolute"].includes(window.getComputedStyle(t).position)||(t.style.position="relative"))}moveElementBackAfterBackdropRemoval(t){!t||!this.elementOriginalStyle||(t.style.zIndex=this.elementOriginalStyle.zIndex,t.style.position=this.elementOriginalStyle.position,this.elementOriginalStyle=void 0)}}return n};export{E as B,v as F,y as P};
