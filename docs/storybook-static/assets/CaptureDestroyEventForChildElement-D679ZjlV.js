import{b as h}from"./listitem.component-Cy9hWtov.js";const n=(a,e)=>!!(a.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING),r=a=>!!a;class o{constructor(e,s){this.cache=[],this.itemCreationHandler=i=>{this.addItem(i.target,void 0)},this.itemDestroyHandler=i=>{this.delete(i.target)},this.host=e,e.addController(this),this.isValidItem=(s==null?void 0:s.isValidItem)||r,this.host.addEventListener(h.CREATED,this.itemCreationHandler),this.host.addEventListener(h.DESTROYED,this.itemDestroyHandler)}get items(){return this.cache}hostConnected(){}hostDisconnected(){}add(e){this.addItem(e,void 0)}addAt(e,s){this.addItem(e,s)}addItem(e,s=void 0){const i=e;if(this.isValidItem(i)&&!this.cache.includes(i)){const t=s===void 0?this.cache.findIndex(d=>n(i,d)):s;t===-1?this.cache.push(i):t>=0&&this.cache.splice(t,0,i)}}delete(e){const s=this.cache.indexOf(e);s!==-1&&this.cache.splice(s,1)}reset(e){this.cache.length=0,this.cache.push(...e||[])}}const m=a=>{class e extends a{constructor(...i){super(...i),this.handleItemCreation=t=>{const d=t.target;d&&d.addEventListener(h.DESTROYED,this.handleItemRemovedEvent)},this.handleItemRemovedEvent=t=>{if(t.stopImmediatePropagation(),t.target&&t.type===h.DESTROYED){t.target.removeEventListener(h.DESTROYED,this.handleItemRemovedEvent);const d=new Event(t.type,{bubbles:t.bubbles,composed:t.composed});Object.defineProperty(d,"target",{set(){},get:()=>t.target}),this.dispatchEvent(d)}},this.addEventListener(h.CREATED,this.handleItemCreation)}}return e};export{m as C,o as E};
