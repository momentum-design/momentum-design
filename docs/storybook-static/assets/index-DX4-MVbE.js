import{u as f,U as E,F as p,n as c}from"./iframe-CWfhylcR.js";import{v as I}from"./v4-CmTdKEVZ.js";function v(l,e=500){let t;const n=(...i)=>{t!==void 0&&window.clearTimeout(t),t=window.setTimeout(()=>{t=void 0,l(...i)},e)};return n.cancel=()=>{t!==void 0&&(window.clearTimeout(t),t=void 0)},n}const b=f.constructTagName("screenreaderannouncer"),T={ASSERTIVE:"assertive",POLITE:"polite",OFF:"off"},d={ARIA_LIVE:T.POLITE,DELAY:150,IDENTITY:"mdc-screenreaderannouncer-identity",TIMEOUT:2e4,DEBOUNCE:500},w=[E`
    :host {
      display: none;
      visibility: hidden;
    }
  `];var g=Object.defineProperty,a=(l,e,t,n)=>{for(var i=void 0,s=l.length-1,r;s>=0;s--)(r=l[s])&&(i=r(e,t,i)||i);return i&&g(e,t,i),i};const h=class h extends p{constructor(){super(...arguments),this.announcement="",this.identity="",this.dataAriaLive=d.ARIA_LIVE,this.delay=d.DELAY,this.timeout=d.TIMEOUT,this.debounceTime=d.DEBOUNCE,this.timeOutIds=[],this.ariaLiveAnnouncementIds=[]}announce(e,t,n,i){var s;if(e.length>0){const r=`mdc-screenreaderannouncer-announcement-${I()}`,u=document.createElement("div");u.setAttribute("id",r),u.setAttribute("aria-live",i),(s=this.getElementByIdAcrossShadowRoot(this.identity))==null||s.appendChild(u);const A=window.setTimeout(()=>{const m=document.createElement("p");m.textContent=e,u.appendChild(m),this.ariaLiveAnnouncementIds.push(r);const y=window.setTimeout(()=>{u.remove()},n);this.timeOutIds.push(y)},t);this.timeOutIds.push(A)}}clearTimeOutsAndAnnouncements(){this.timeOutIds.forEach(e=>{window.clearTimeout(e)}),this.ariaLiveAnnouncementIds.forEach(e=>{var t;(t=this.getElementByIdAcrossShadowRoot(e))==null||t.remove()})}getElementByIdAcrossShadowRoot(e){var i;const t=document.getElementById(e);if(t)return t;const n=this.findModalAncestor();return((i=n==null?void 0:n.shadowRoot)==null?void 0:i.getElementById(e))||null}createAnnouncementAriaLiveRegion(){let e=this.getElementByIdAcrossShadowRoot(this.identity);if(!e){e=document.createElement("div"),e.id=this.identity;const t=document.createElement("style");t.textContent=`
        .mdc-screenreaderannouncer__visually-hidden {
          clip: rect(0 0 0 0);
          clip-path: inset(50%);
          height: 1px;
          overflow: hidden;
          position: absolute;
          white-space: nowrap;
          width: 1px;
        }
      `,e.appendChild(t),e.classList.add("mdc-screenreaderannouncer__visually-hidden");const n=this.findModalAncestor();n!=null&&n.shadowRoot?n.shadowRoot.appendChild(e):document.body.appendChild(e)}}findModalAncestor(){let e=this;for(;e;){const t=e.closest('[aria-modal="true"]');if(t)return t;const n=e.getRootNode();if(n instanceof ShadowRoot&&n.host)e=n.host;else break}return null}setupDebouncedAnnounce(){this.debouncedAnnounce=v(()=>{this.announcement.length>0&&(this.announce(this.announcement,this.delay,this.timeout,this.dataAriaLive),this.announcement="")},this.debounceTime)}connectedCallback(){super.connectedCallback(),this.identity.length===0&&(this.identity=d.IDENTITY),this.createAnnouncementAriaLiveRegion(),this.setupDebouncedAnnounce()}disconnectedCallback(){var e;super.disconnectedCallback(),this.clearTimeOutsAndAnnouncements(),(e=this.debouncedAnnounce)==null||e.cancel()}updated(e){var t;e.has("identity")&&this.identity.length===0&&(this.identity=d.IDENTITY,this.createAnnouncementAriaLiveRegion()),e.has("debounceTime")&&this.setupDebouncedAnnounce(),e.has("announcement")&&this.announcement.length>0&&((t=this.debouncedAnnounce)==null||t.call(this))}};h.styles=[...p.styles,...w];let o=h;a([c({type:String,reflect:!0})],o.prototype,"announcement");a([c({type:String,reflect:!0})],o.prototype,"identity");a([c({type:String,reflect:!0,attribute:"data-aria-live"})],o.prototype,"dataAriaLive");a([c({type:Number,reflect:!0})],o.prototype,"delay");a([c({type:Number,reflect:!0})],o.prototype,"timeout");a([c({type:Number,reflect:!0,attribute:"debounce-time"})],o.prototype,"debounceTime");o.register(b);export{T as A,d as D,v as d};
